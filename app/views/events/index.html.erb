<h1>イベント一覧画面</h1>

<p><%= notice %></p>

<h2>検索フォーム</h2>
<%= search_form_for @search, url: events_path do |f|%>
  <%= f.label :name_cont, 'イベント名' %>
  <%= f.search_field :name_cont %>

  <%= f.label :start_on_eq, '日付' %>
  <%= f.date_field :start_on_eq %>

  <%= f.submit '検索' %>
<% end %>

<br>

<table>
  <tr>
    <th>イベント名</th>
    <th>種類</th>
    <th>日付</th>
    <th>曜日</th>
    <th>開催時間</th>
    <th>料金</th>
    <th>レーン数</th>
  </tr>

<% @events.each do |event| %>
  <tr>
    <td><%= event.name %></td>
    <td><%= event.kind %></td>
    <td><%= event.start_on.strftime('%Y年%m月%d日') %></td>
    <td><%= event.start_on.strftime('%a') %></td>
    <td><%= event.start_on.strftime('%H時%M分') %></td>
    <td><%= event.price %>円</td>
    <td><%= event.lane %>レーン</td>

    <% if current_user.admin %>
      <td><%= link_to "編集", edit_event_path(event.id) %></td>
      <td><%= link_to '削除', event_path(event.id), method: :delete, data: { confirm: '削除していいですか？' } %></td>
    <% end %>
  </tr>
<% end %>
</table>

<br>

<%= paginate @events %>

<br>
<% if current_user.admin %>
  <%= link_to '新規イベント登録', new_event_path %>
<% end %>
<br>

<%= month_calendar events: @events do |date, events| %>
  <%= date %>

  <% events.each do |event| %>
    <div>
    <%= link_to event.name, event_path(event.id) %>
    <%= link_to event.start_on.strftime('%H時%M分'), event_path(event.id) %>
    </div>
  <% end %>
<% end %>

